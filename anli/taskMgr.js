BizQQWPA.define("wpa.ta","util.getScript,util.serialize,util.cookie",function(m){var i="http://tajs.qq.com/crmqq.php",p="pgv_pvi";var j=m("getScript"),k=m("serialize"),l=m("cookie");var n=false;var o=function(a,b,f){var c=false;if(o.uid){f(o.uid);c=true}if(!n){var d={uid:a,dm:b},e=i+"?"+k(d,"=","&");j(e,function(){n=true;if(c){return}o.uid=l.get(p);if(o.uid){f(o.uid)}else{setTimeout(arguments.callee,30)}})}};o.uid=l.get(p)||"";return o});BizQQWPA.define("wpa.kfuin","util.getJSONP",function(f){var g=f("getJSONP");var h="http://wpl.b.qq.com/cgi/conv.php";var e={};return{get:function(b,a){a=a||function(){};if(!b||e[b]){a(e[b]);return}var c={num:b};g(h,c,function(d){if(!d||d.r!==0){a();return}var j=e[b]=d.data.kfuin;a(j)})},set:function(a,b){e[a]=b}}});BizQQWPA.define("wpa.sid","util.getJSONP,util.domain",function(k){var i=k("getJSONP"),j=k("domain");var h="http://wpl.b.qq.com/cgi/ta.php";var g={};var l=j.topDomain;return{get:function(b,a){a=a||function(){};if(!b||g[b+"."+l]){a(g[b+"."+l]);return}var c={na:b,dm:l};i(h,c,function(d){if(!d||d.r!==0){a();return}var e=g[b+"."+l]=d.data.sid;a(e)})},set:function(a,b){g[a+"."+l]=b}}});BizQQWPA.define("util.titleFlash","util.taskMgr",function(l){var k=120;var h=l("taskMgr");var j=document,i=j.title,g=h.newTask(function(){var a=j.title;j.title=a.substr(1,a.length)+a.substr(0,1)},k);return titleFlash={on:function(a){j.title=a+(""+j.title);g.run()},off:function(){g.pause();j.title=i}}});BizQQWPA.define("util.className",function(){return{addClass:function(c,d){if(!c||!d){return c}if(!c.className){c.className=d;return c}if(this.hasClass(c,d)){return c}c.className+=" "+d;return c},hasClass:function(c,d){return(c&&d)?new RegExp("\\b"+d+"\\b").test(c.className):false},removeClass:function(c,d){if(!c||!d){return c}if(!this.hasClass(c,d)){return c}if(c.className){c.className=c.className.replace(d,"")}else{c.setAttribute=c.getAttribute("class").replace(d,"")}return c}}});BizQQWPA.define("util.Style",function(){return{load:function(f,g,h){h=h||{};var j=h.context||document;var i=j.createElement("link");i.name=f;i.type="text/css";i.setAttribute("rel","stylesheet");i.setAttribute("href",g);(function(){try{var b=j.getElementsByTagName("head")[0];b.insertBefore(i,b.firstChild)}catch(a){setTimeout(arguments.callee,1)}})();return i},add:function(h,j,i){i=i||{};var g=i.context||document;var k=g.createElement("style");k.type="text/css";k.name=h;var l=g.getElementsByTagName("body")[0];l.insertBefore(k,l.firstChild);if(k.styleSheet){k.styleSheet.cssText=j}else{k.appendChild(g.createTextNode(j))}return k}}});BizQQWPA.define("util.taskMgr","util.proxy",function(i){var k="run",l="pause",n="drop",o=50;var p=i("proxy");var j=function(){this.circle=[];this.pos=0;setInterval(p(this,this.loop),16)};j.prototype={newTask:function(b,a){var c=new m(b,a);this.circle.push(c);return c},once:function(b,a){return this.newTask(function(){b.apply(this);this.drop()},a)},loop:function(){var f=this.circle,a=this.pos,c=f.length,b=+new Date(),d=o,e=f[a];while(c>0&&+new Date()-b<d){if(e.isRunning()){e.execute()}else{if(e.isDropped()){f.splice(a,1);a--}}a=(a+1)%f.length;e=f[a];c--}this.pos=a}};var m=function(b,a){this.fn=b;this.gap=a;this.status=l;this.lastExecTime=+new Date()};m.prototype={run:function(){this.status=k;return this},pause:function(){this.status=l;return this},drop:function(){this.status=n;return this},execute:function(){if(+new Date()-this.lastExecTime<this.gap){return false}this.fn();this.lastExecTime=+new Date();return true},getGap:function(){return this.gap},setGap:function(a){this.gap=a;return this},isRunning:function(){return this.status===k},isPaused:function(){return this.status===l},isDropped:function(){return this.status===n}};return new j()});
